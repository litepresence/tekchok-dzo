============================================================
CONTENT EXTRACTION v3 - FIXED
Handles ranges, liturgical mapping, boundary overlaps
============================================================

Loading boundary.json...
  Loaded 2 volumes

Processing layer: tibetan
------------------------------------------------------------
  Progress: 10 sections...  Progress: 20 sections...  Progress: 30 sections...  Progress: 40 sections...  Progress: 50 sections...  Progress: 60 sections...  Progress: 70 sections...  Progress: 80 sections...  ✓ Extracted 87 sections

Processing layer: wylie
------------------------------------------------------------
  Progress: 10 sections...  Progress: 20 sections...  Progress: 30 sections...  Progress: 40 sections...  Progress: 50 sections...  Progress: 60 sections...  Progress: 70 sections...  Progress: 80 sections...  ✓ Extracted 87 sections

Processing layer: literal
------------------------------------------------------------
  Progress: 10 sections...  Progress: 20 sections...  Progress: 30 sections...  Progress: 40 sections...  Progress: 50 sections...  Progress: 60 sections...  Progress: 70 sections...  Progress: 80 sections...  ✓ Extracted 87 sections

Processing layer: liturgical
------------------------------------------------------------
  Progress: 10 sections...  Progress: 20 sections...  Progress: 30 sections...  Progress: 40 sections...  Progress: 50 sections...  Progress: 60 sections...Traceback (most recent call last):
  File "/home/oracle/extinction-event/EV/theg pa'i mchog rin po che'i mdzod/1/./02_extract_content_v3.py", line 320, in <module>
    main()
  File "/home/oracle/extinction-event/EV/theg pa'i mchog rin po che'i mdzod/1/./02_extract_content_v3.py", line 287, in main
    content = process_section(volume_data, chapter_data, section_data, layer)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/oracle/extinction-event/EV/theg pa'i mchog rin po che'i mdzod/1/./02_extract_content_v3.py", line 247, in process_section
    content = extract_section_content_fixed(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/oracle/extinction-event/EV/theg pa'i mchog rin po che'i mdzod/1/./02_extract_content_v3.py", line 127, in extract_section_content_fixed
    page_last_line = get_last_line_on_page(page_lines)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/oracle/extinction-event/EV/theg pa'i mchog rin po che'i mdzod/1/./02_extract_content_v3.py", line 69, in get_last_line_on_page
    line_num, _, format_type = parse_line_number(line)
    ^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 3)
